<% @page_title = "Password Change for #{current_person.fullname}" %>

<div class="page-header">
  <h2><%= @page_title %></h2>
</div>

<div class="row">
  <div class="col-md-7">

<%= form_for @person, url: password_person_path, :method => 'post', :html => { :class => 'form-horizontal' } do |f| -%>

  <%- if @person.errors.present? -%>
    <div class="col-md-offset-4 col-md-8">
      <div class="alert alert-danger alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4>Please fix the issue below:</h4>
        <ul>
        <% @person.errors.full_messages.each do |error_message| %>
          <li><%= error_message %></li>
        <% end %>
      </ul>
      </div>
    </div>
  <%- end -%>

  <div class="form-group">
    <label for="current_password" class="col-md-4 control-label">Current password</label>
    <div class="col-md-6">
      <%= f.password_field :current_password, :class => "form-control" %>
    </div>
  </div>

  <div class="form-group">
    <label for="password" class="col-md-4 control-label">New Password</label>
    <div class="col-md-6">
      <%= f.password_field :password, :class => "form-control" %>
      <span class="help-block">Minimum 8 characters.</span>
    </div>
  </div>

  <div class="form-group">
    <div class="col-md-offset-4 col-md-8">
      <p><%= f.submit "Change", :class => "btn btn-default btn-primary" %> <%= link_to "Cancel", person_path(current_person), :class => "btn btn-default btn-link" %></p>
    </div>
  </div>

  <%- end # end form -%>

  </div>
</div>
