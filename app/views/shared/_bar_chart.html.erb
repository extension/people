  <div id="plot_for_<%= datalabel %>" class='barchart'></div>
  <script class="code" type="text/javascript">
    $(document).ready(function(){
      setTimeout(function(){
      var data = <%= data.to_json.html_safe -%>;
      var labels = <%= labels.to_json.html_safe -%>;
      var plot1 = jQuery.jqplot("plot_for_<%= datalabel %>", [data],
        {
          series:[{renderer:$.jqplot.BarRenderer}],
          axesDefaults: {

          },
          axes: {
            xaxis: {
              <%- if data.size >= 7 -%>
              tickRenderer: $.jqplot.CanvasAxisTickRenderer,
              tickOptions: {
               angle: -30
              },
              <%- end -%>
              renderer: $.jqplot.CategoryAxisRenderer,
              ticks: labels
            },
            yaxis:{padMax:1.3}
          },
          seriesDefaults: {
            renderer:$.jqplot.BarRenderer,
            rendererOptions: {
              fillToZero: true 
            },
            pointLabels: { show: true },            
          },
          grid: {
              drawBorder: false,
              shadow: false,
              background: "white"
          }
        }
      );
    });
  });
  </script>
